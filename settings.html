<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Home</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/favicon1.ico" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" 
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"/>
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/style.css" rel="stylesheet" />
        <script type="text/javascript" src="js/verify.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
        <script>
          $(function(){
            $("#sidebar").load("sidebar.html");
          });
          </script> 
      </head>
      <body class="home-body bg-dark">
          <div class="container home-cont">
          <div id="sidebar"></div>
          <main class="home-main d-flex flex-nowrap">
            <div class='middle border border-light border-1 border-top-0 border-bottom-0 position-relative' id="middle">
              <div class="profile-create" id="profileCreate">
              </div>
            </div>
          </main>
          </div>
      </body>
      <script type="text/javascript">
      let myheaders = new Headers();
      myheaders.append("Authorization",sessionStorage.getItem("token"));
        myheaders.append('Content-Type','application/json');
      window.onload = verify(),loadProfile();
      async function loadProfile(){
          let response = await fetch('http://127.0.0.1:8000/get_user', {
            method: 'GET',
            headers: myheaders
        })
        let profile = await response.json();
        //console.log(profile)
        
            let avis_cards = document.createElement('div');
            avis_cards.className = 'avis-cards';

            let card = document.createElement('div');
            card.className = 'card bg-dark';
            avis_cards.appendChild(card);

            let card_body = document.createElement('div');
            card_body.className = 'card-body';
            card.appendChild(card_body);

            let avis_card_head = document.createElement('div');
            avis_card_head.className = 'avis-card-head';
            card_body.appendChild(avis_card_head);

            let fullname = document.createElement('h6');
            fullname.innerText = 'Full Name: '+profile.fullname;
            fullname.className = 'card-title';
            fullname.id="card-fullname";
            avis_card_head.appendChild(fullname);

            let username = document.createElement('h6');
            username.innerText = 'Username: '+profile.username;
            username.className = 'card-title';
            username.id="card-username";
            avis_card_head.appendChild(username);

            let email = document.createElement('h6');
            email.innerText = 'Email: '+profile.email;
            email.className = 'card-title';
            email.id="card-email";
            avis_card_head.appendChild(email);

            let dob = document.createElement('h6');
            dob.innerText = 'Born On: '+profile.dob;
            dob.className = 'card-title';
            dob.id="card-dob";
            avis_card_head.appendChild(dob);

            
            let joined_on = document.createElement('h6');
            joined_on.innerText = 'Joined On: '+profile.created_on;
            joined_on .className = 'card-joined_on';
            joined_on .id="card-created_on";
            avis_card_head.appendChild(joined_on);

            document.getElementById('profileCreate').appendChild(avis_cards);

    }
      </script>
      
      </html>   